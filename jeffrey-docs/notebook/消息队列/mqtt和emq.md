+ **mqtt服务质量QoS（quality of service）**
  + Qos0

  允许消息丢失场景（性能最高），最多一次的传输。

  + QoS1

  不允许消息丢失，但允许消息重复（性能中等），至少一次的传输。

  + QoS2

  不允许消息丢失，也不允许消息重复（性能最差）

+ **EMQ离线消息**

保留消息

+ ## 

```
高级消息队列协议（Advanced Message Queueing Protocol (AMQP)）:
JMS非常棒而且人们也非常乐意使用它。微软开发了NMS（.NET消息传递服务）来支持他们的平台和编程语言，它效果还不错。但是碰到了互用性的问题。两套使用两种不同编程语言的程序如何通过它们的异步消息传递机制相互通信呢。此时就需要定义一个异步消息传递的通用标准。JMS或者NMS都没有标准的底层协议。它们可以在任何底层协议上运行，但是API是与编程语言绑定的。AMQP解决了这个问题，它使用了一套标准的底层协议，加入了许多其他特征来支持互用性，为现代应用丰富了消息传递需求
AMQP的主要特性：

独立于平台的底层消息传递协议
消费者驱动消息传递
跨语言和平台的互用性
它是底层协议的
有5种交换类型direct，fanout，topic，headers，system
面向缓存的
可实现高性能
支持长周期消息传递
支持经典的消息队列，循环，存储和转发
支持事务（跨消息队列）
支持分布式事务（XA，X/OPEN，MS DTC）
使用SASL和TLS确保安全性
支持代理安全服务器
元数据可以控制消息流
不支持LVQ
客户端和服务端对等
可扩展

消息队列遥测传输（Message Queueing Telemetry Transport (MQTT)）:
现在我们已经有了面向基于Java的企业应用的JMS和面向所有其他应用需求的AMQP。为什么我们还需要第三种技术？它是专门为小设备设计的。计算性能不高的设备不能适应AMQP上的复杂操作，它们需要一种简单而且可互用的方式进行通信。这是MQTT的基本要求，而如今，MQTT是物联网（IOT）生态系统中主要成分之一。
MQTT的主要特性：

面向流，内存占用低
为小型无声设备之间通过低带宽发送短消息而设计
不支持长周期存储和转发
不允许分段消息（很难发送长消息）
支持主题发布-订阅
不支持事务（仅基本确认）
消息实际上是短暂的（短周期）
简单用户名和密码，基于没有足够信息熵的安全
不支持安全连接
消息不透明
Topic是全局的（一个全局的命名空间）
支持最新值队列（Last Value Queue (LVQ) ）
客户端和服务端不对称
不能扩展

AMQP和MQTT之间的区别
在过去几十年中，用于广泛部署的消息的异步排队的开源协议是AMQP vs MQTT。最近，它已适应其新更新。AMQP有意成为国际标准组织或国际电化学委员会的一部分，并被OASIS选择，MQTT已采用Eclipse。AMQP使用Wire执行其消息传递队列。因此，有线协议在网络上转换为字节值洪流。MQTT是为具有最小带宽的受限设备而开发的。这是一个轻量级的广播系统，用户可以像客户端一样传输和接收消息。

AMQP和MQTT之间的关键区别
物联网中同时使用了AMQP和MQTT。但是，让我们讨论主要差异：

MQTT具有客户端/代理体系结构，而AMQP具有客户端或代理以及客户端或服务器体系结构。
MQTT遵循发布和订阅的抽象，而AMQP遵循响应或请求以及Publish或订阅的方法。
AMQP的标头大小为8个字节，MQTT为2个字节。MQTT的消息大小较小且已定义，而AMQP的价格可协商且未定义。
MQTT的方法是连接，发布，关闭，订阅和断开连接。AMQP遵循消费，交付，发布，获取，选择，确认，删除，恢复，拒绝，打开和关闭。
MQTT对缓存和代理有部分支持，而AMQP提供了全部支持。
AMQP和MQTT都遵循TCP协议，二进制标准和开放源代码排队系统。
AMQP提供的安全性是IPSec，SASL，TLS或SSL，而MQTT仅提供TLS或SSL安全标准。AMQP与TCP一起使用SCTP进行传输。OASIS支持AMQP和MQTT。
MQTT交付的服务质量非常好，并且会忘记QoS是否为0。如果QoS为1，则至少为1；如果QoS为2，则为1。AMQP提供的服务质量是用于结算和取消类似于MQTT的格式。


```

